/*‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
 üåÄ  MACRO: RECALL SOBRE RUNA SUELTA
 üìÖ  Versi√≥n : 1.3  ¬∑ 23-May-2025
 ‚úçÔ∏è  Autor   : Voorhees
 üó∫Ô∏è  Servidor: √öltima Alianza
 üíª  Cliente : ClassicUO Web

 ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê üìñ  INSTRUCCIONES  üìñ ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
 ‚Ä¢ Pega el script en ¬´Scripts¬ª (Meta K) y ponlo en la Action Bar o a una tecla.
 ‚Ä¢ Necesitas al menos una runa marcada (graphic 0x1F14) en tu mochila.
 ‚Ä¢ Flujo de la macro
     1) Encuentra la primera runa.
     2) Lanza Recall y la apunta.
     3) Muestra cuenta atr√°s de 7‚Üí0 s en chat del sistema.
 ‚Ä¢ Todos los par√°metros editables est√°n en CONFIG.
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ*/

/*‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê ‚öôÔ∏è  CONFIGURACI√ìN  ‚öôÔ∏è ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê*/
const CFG = {
  runeGraphic : 0x1F14,        // üì¶ Runa marcada
  spell       : Spells.Recall, // ‚ú® Hechizo principal
  targetDelay : 8000,          // ‚è≥ Tiempo m√°x. para cursor
  recallCast  : 7              // üî¢ Segundos entre cast y teleport
};

/*‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê üõ†Ô∏è  UTILIDADES  üõ†Ô∏è ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê*/
const log  = (m:string,h=66)=>client.sysMsg(m,h);
const rune = ()=>client.findType(CFG.runeGraphic,undefined,player.backpack) as Item;

function countdown(sec:number){
  for(let s=sec;s>=0;s--){
    log(`‚è≥ Teleporte en ${s}s`,66);
    if(s>0 && journal.waitForText('You have been teleported','System',1000)) return;
    if(s===0) journal.waitForText('You have been teleported','System',1000);
  }
}

/*‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê üöÄ  EJECUCI√ìN  üöÄ ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê*/
(()=>{
  const r=rune();
  if(!r){log('‚ùå No hay runas en la mochila.',33);return;}

  log('‚åõ Lanzando Recall‚Ä¶',66);
  client.castSpell(CFG.spell);
  if(!target.wait(CFG.targetDelay)){
    log('‚ö†Ô∏è  No se abri√≥ el cursor.',33);return;
  }
  target.entity(r);

  countdown(CFG.recallCast);

  log('‚úÖ ¬°Est√°s a Salvo!.',65);
})();
